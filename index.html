<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Propuesta Adempiere para Amapola</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .flowchart-node {
            border: 2px solid #087E8B;
            background-color: #BFD7EA;
            color: #0B3954;
        }
        .flowchart-arrow {
            color: #087E8B;
            font-size: 2rem;
            line-height: 1;
        }
        .process-step {
            position: relative;
            padding-left: 3rem;
            padding-bottom: 2rem;
            border-left: 4px solid #087E8B;
        }
        .process-step:last-child {
            border-left: 4px solid transparent;
        }
        .process-dot {
            position: absolute;
            left: -1.2rem;
            top: 0;
            height: 2rem;
            width: 2rem;
            border-radius: 50%;
            background-color: #FF5A5F;
            border: 4px solid #F7FAFC;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">
    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-[#0B3954]">Unificando Amapola: La Ventaja Estratégica de Adempiere</h1>
            <p class="text-xl text-[#087E8B] mt-2">Una propuesta para la integración y optimización de procesos.</p>
        </header>

        <main class="space-y-12">

            <section class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                <h2 class="text-3xl font-bold text-[#0B3954] mb-4 text-center">El Desafío Actual: Aislamiento Operativo</h2>
                <p class="max-w-3xl mx-auto text-center text-gray-600 mb-8">Amapola opera con SAP, un sistema diferente al de las demás empresas del grupo que utilizan Adempiere. Esta desconexión crea silos de información, dificulta la colaboración y limita la visibilidad estratégica a nivel corporativo.</p>
                <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-8">
                    <div class="text-center">
                        <div class="p-4 bg-[#BFD7EA] text-[#0B3954] rounded-lg shadow-md">
                            <h3 class="font-bold text-xl">Grupo Corporativo</h3>
                            <p class="text-lg">Adempiere ERP</p>
                        </div>
                    </div>
                    <div class="text-center text-4xl font-bold text-[#C81D25] animate-pulse">
                        &#10216;&#10217;
                    </div>
                    <div class="text-center">
                         <div class="p-4 bg-[#BFD7EA] text-[#0B3954] rounded-lg shadow-md">
                            <h3 class="font-bold text-xl">Amapola</h3>
                            <p class="text-lg">SAP ERP</p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                <h2 class="text-3xl font-bold text-[#0B3954] mb-4 text-center">La Solución: Integración Total con Adempiere</h2>
                <p class="max-w-3xl mx-auto text-center text-gray-600 mb-8">La migración a Adempiere consolida todos los procesos de Amapola en una única plataforma, alineándola con el grupo y creando un ecosistema de gestión unificado, eficiente y transparente.</p>
                <div class="flex flex-col items-center">
                    <div class="flowchart-node font-bold text-2xl p-6 rounded-full shadow-lg mb-6">Adempiere ERP</div>
                    <div class="w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 text-center">
                        <div class="flex flex-col items-center">
                            <div class="flowchart-arrow">&#11107;</div>
                            <div class="flowchart-node p-4 rounded-lg w-full">Producción y Calidad</div>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="flowchart-arrow">&#11107;</div>
                            <div class="flowchart-node p-4 rounded-lg w-full">Ingresos y Egresos</div>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="flowchart-arrow">&#11107;</div>
                            <div class="flowchart-node p-4 rounded-lg w-full">Activo Fijo</div>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="flowchart-arrow">&#11107;</div>
                            <div class="flowchart-node p-4 rounded-lg w-full">Nómina (Interfaz SPI)</div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                <h2 class="text-3xl font-bold text-[#0B3954] mb-2 text-center">Control de Calidad y Producción de Principio a Fin</h2>
                 <p class="max-w-3xl mx-auto text-center text-gray-600 mb-8">Adempiere ofrecerá un control granular sobre cada etapa del proceso de fabricación de galletas, asegurando la máxima calidad y eficiencia desde la materia prima hasta el producto final.</p>
                <div class="relative">
                    <div class="process-step">
                        <div class="process-dot">1</div>
                        <h3 class="font-bold text-xl text-[#087E8B]">Recepción de Materias Primas</h3>
                        <p class="text-gray-600">Verificación y registro de insumos con control de calidad inicial.</p>
                    </div>
                    <div class="process-step">
                        <div class="process-dot">2</div>
                        <h3 class="font-bold text-xl text-[#087E8B]">Mezclado y Preparación</h3>
                        <p class="text-gray-600">Control de lotes y recetas para garantizar la consistencia del producto.</p>
                    </div>
                    <div class="process-step">
                        <div class="process-dot">3</div>
                        <h3 class="font-bold text-xl text-[#087E8B]">Horneado y Enfriamiento</h3>
                        <p class="text-gray-600">Monitoreo de tiempos y temperaturas para un horneado perfecto.</p>
                    </div>
                     <div class="process-step">
                        <div class="process-dot">4</div>
                        <h3 class="font-bold text-xl text-[#087E8B]">Empaque y Etiquetado</h3>
                        <p class="text-gray-600">Aseguramiento de la calidad final y trazabilidad del producto.</p>
                    </div>
                    <div class="process-step">
                        <div class="process-dot">5</div>
                        <h3 class="font-bold text-xl text-[#087E8B]">Distribución</h3>
                        <p class="text-gray-600">Gestión de inventario y logística integrada para una entrega eficiente.</p>
                    </div>
                </div>
            </section>

            <section>
                <h2 class="text-3xl font-bold text-[#0B3954] mb-8 text-center">Beneficios Clave: Un Impulso al Crecimiento</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-2xl font-bold text-[#0B3954] mb-4 text-center">Reducción de Costos Operativos</h3>
                        <p class="text-center text-gray-600 mb-4">La eliminación de las licencias de SAP y la optimización de procesos generarán un ahorro significativo en los costos de TI y operativos.</p>
                        <div class="chart-container h-64 md:h-80">
                            <canvas id="costosChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-2xl font-bold text-[#0B3954] mb-4 text-center">Aumento de la Eficiencia</h3>
                         <p class="text-center text-gray-600 mb-4">La automatización y estandarización de flujos de trabajo reducirá los errores manuales y acelerará los tiempos de reporte y análisis.</p>
                         <div class="chart-container h-64 md:h-80">
                            <canvas id="eficienciaChart"></canvas>
                        </div>
                    </div>
                     <div class="bg-white rounded-lg shadow-lg p-6 md:col-span-2 flex flex-col md:flex-row items-center justify-around text-center">
                        <div class="mb-6 md:mb-0">
                            <h3 class="text-5xl font-bold text-[#FF5A5F]">100%</h3>
                            <p class="text-xl text-[#0B3954] font-semibold">Alineación Estratégica</p>
                            <p class="text-gray-600">Sincronización total con los objetivos y sistemas del grupo.</p>
                        </div>
                         <div class="mb-6 md:mb-0">
                            <h3 class="text-5xl font-bold text-[#FF5A5F]">360°</h3>
                            <p class="text-xl text-[#0B3954] font-semibold">Visibilidad en Tiempo Real</p>
                            <p class="text-gray-600">Datos consolidados para una toma de decisiones más rápida y acertada.</p>
                        </div>
                        <div>
                            <h3 class="text-5xl font-bold text-[#FF5A5F]">✓</h3>
                            <p class="text-xl text-[#0B3954] font-semibold">Control Total de Calidad</p>
                            <p class="text-gray-600">Garantía de consistencia y excelencia en cada galleta.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="bg-[#0B3954] text-white rounded-lg shadow-lg p-8 text-center">
                <h2 class="text-3xl font-bold mb-4">Próximos Pasos</h2>
                <p class="text-xl text-[#BFD7EA] mb-6">Proponemos una reunión para presentar un plan de proyecto detallado, incluyendo cronograma, recursos y fases de implementación, para asegurar una transición exitosa a Adempiere.</p>
                <p class="text-2xl font-semibold">Migrar a Adempiere es un paso estratégico hacia un futuro más eficiente, unificado y rentable para Amapola.</p>
            </section>

             <section class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                <h2 class="text-3xl font-bold text-[#0B3954] mb-4 text-center">✨ ERP - Gemini ✨</h2>
                <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-8">
                    <button id="resumenBtn" class="bg-[#FF5A5F] text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-[#C81D25] transition-colors duration-300">
                        ERP CyA ✨
                    </button>
                    <button id="recomendacionesBtn" class="bg-[#087E8B] text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-[#0B3954] transition-colors duration-300">
                        ERP CyA ✨
                    </button>
                </div>
                <div class="mt-8">
                    <div id="loading" class="hidden text-center text-[#087E8B]">
                        <span class="animate-spin inline-block h-8 w-8 border-4 border-[#087E8B] border-t-transparent rounded-full"></span>
                        <p class="mt-2 font-semibold">Generando...</p>
                    </div>
                    <div id="output" class="text-gray-700 text-lg leading-relaxed text-center"></div>
                </div>
            </section>
        </main>

        <footer class="text-center mt-12 text-gray-500">
            <p>Propuesta de Negocio Confidencial &copy; 2025</p>
        </footer>
    </div>

    <script>
        const wrapLabel = (label, maxWidth) => {
            const words = label.split(' ');
            const lines = [];
            let currentLine = '';
            words.forEach(word => {
                if ((currentLine + ' ' + word).trim().length > maxWidth) {
                    lines.push(currentLine.trim());
                    currentLine = word;
                } else {
                    currentLine = (currentLine + ' ' + word).trim();
                }
            });
            if (currentLine) {
                lines.push(currentLine.trim());
            }
            return lines;
        };

        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
                return label.join(' ');
            } else {
                return label;
            }
        };

        const commonChartOptions = {
            maintainAspectRatio: false,
            responsive: true,
            plugins: {
                legend: {
                    position: 'top',
                    labels: {
                        color: '#0B3954',
                        font: {
                            size: 14,
                            weight: 'bold'
                        }
                    }
                },
                tooltip: {
                    callbacks: {
                        title: tooltipTitleCallback
                    }
                }
            }
        };

        const costosCtx = document.getElementById('costosChart').getContext('2d');
        new Chart(costosCtx, {
            type: 'doughnut',
            data: {
                labels: ['Costo Anual SAP', 'Costo Anual Adempiere'],
                datasets: [{
                    label: 'Costo Anual Proyectado',
                    data: [100, 25],
                    backgroundColor: ['#C81D25', '#087E8B'],
                    borderColor: ['#FFFFFF'],
                    borderWidth: 2
                }]
            },
            options: {
                ...commonChartOptions,
                plugins: {
                    ...commonChartOptions.plugins,
                    tooltip: {
                        ...commonChartOptions.plugins.tooltip,
                         callbacks: {
                            ...commonChartOptions.plugins.tooltip.callbacks,
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed !== null) {
                                    label += new Intl.NumberFormat('es-VE', { style: 'currency', currency: 'VES' }).format(context.parsed * 10000) + ' (Estimado)';
                                }
                                return label;
                            }
                        }
                    }
                }
            }
        });

        const eficienciaCtx = document.getElementById('eficienciaChart').getContext('2d');
        const eficienciaLabels = ['Tiempo de Reporte (Horas)', 'Tasa de Errores Manuales (%)'];
        const wrappedEficienciaLabels = eficienciaLabels.map(label => wrapLabel(label, 16));

        new Chart(eficienciaCtx, {
            type: 'bar',
            data: {
                labels: wrappedEficienciaLabels,
                datasets: [
                    {
                        label: 'Antes (SAP)',
                        data: [8, 15],
                        backgroundColor: '#FF5A5F',
                        borderColor: '#C81D25',
                        borderWidth: 1
                    },
                    {
                        label: 'Después (Adempiere)',
                        data: [1, 2],
                        backgroundColor: '#BFD7EA',
                        borderColor: '#087E8B',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                ...commonChartOptions,
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: '#e0e0e0'
                        },
                        ticks: {
                           color: '#0B3954'
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        },
                         ticks: {
                           color: '#0B3954'
                        }
                    }
                }
            }
        });

        const resumenBtn = document.getElementById('resumenBtn');
        const recomendacionesBtn = document.getElementById('recomendacionesBtn');
        const loadingDiv = document.getElementById('loading');
        const outputDiv = document.getElementById('output');

        const callGeminiApi = async (systemPrompt, userQuery) => {
            outputDiv.innerHTML = '';
            loadingDiv.classList.remove('hidden');
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                }
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                const text = result?.candidates?.[0]?.content?.parts?.[0]?.text;
                outputDiv.innerHTML = text ? text.replace(/\n/g, '<br>') : 'Error al generar el texto.';
            } catch (error) {
                console.error('API Error:', error);
                outputDiv.innerHTML = 'Ocurrió un error al conectar con la API de Gemini. Por favor, inténtalo de nuevo.';
            } finally {
                loadingDiv.classList.add('hidden');
            }
        };

        resumenBtn.addEventListener('click', () => {
            const proposalText = "Propuesta de Negocio para Amapola. Migración de SAP a Adempiere. El objetivo es alinear a Amapola con el resto del grupo, que utiliza Adempiere. Esto permitirá un control total sobre la calidad y la producción de galletas, así como la gestión de ingresos, egresos, activo fijo e interfaz con el sistema de nómina SPI. Se espera una reducción de costos de TI y un aumento de la eficiencia operativa. La estandarización mejorará la visibilidad y la toma de decisiones.";
            const systemPrompt = "Eres un analista de negocios experto. Tu tarea es generar un resumen ejecutivo conciso de un solo párrafo del siguiente texto. Enfócate en los puntos clave para un CEO.";
            callGeminiApi(systemPrompt, proposalText);
        });

        recomendacionesBtn.addEventListener('click', () => {
            const proposalText = "Propuesta de migración del sistema de Amapola de SAP a Adempiere para unificarlo con el resto del grupo. Los objetivos principales son: 1) Proporcionar control total sobre el proceso de calidad y producción de galletas. 2) Integrar los procesos de ingresos, egresos y activo fijo. 3) Interfaz con el software de nómina SPI. 4) Aumentar la eficiencia y reducir costos. La implementación busca una alineación estratégica y visibilidad en tiempo real para la toma de decisiones.";
            const systemPrompt = "Eres un consultor estratégico de TI. Tu tarea es proponer de 3 a 5 recomendaciones estratégicas y de alto nivel basadas en la siguiente propuesta de negocio. El formato debe ser una lista de viñetas con texto conciso.";
            callGeminiApi(systemPrompt, proposalText);
        });
    </script>
</body>
</html>
